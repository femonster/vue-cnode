webpackJsonp([1],{"B20+":function(t,a){},BQjm:function(t,a){},BhNz:function(t,a){},DNjm:function(t,a){},LkMk:function(t,a){},NHnr:function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=i("7+uW"),e={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"m-header z-depth-1"},[i("img",{attrs:{src:"https://cnodejs.org/public/images/cnodejs_light.svg",alt:"logo"}}),t._v(" "),i("ul",{staticClass:"all-list"},[i("li",[i("router-link",{attrs:{to:"/all"}},[t._v("全部")])],1),t._v(" "),i("li",[i("router-link",{attrs:{to:"/good"}},[t._v("精华")])],1),t._v(" "),i("li",[i("router-link",{attrs:{to:"/share"}},[t._v("分享")])],1),t._v(" "),i("li",[i("router-link",{attrs:{to:"/ask"}},[t._v("问答")])],1),t._v(" "),i("li",[i("router-link",{attrs:{to:"/job"}},[t._v("招聘")])],1)])])},staticRenderFns:[]};var n={name:"App",components:{MHeader:i("VU/8")({name:"m-header"},e,!1,function(t){i("yA5T")},null,null).exports}},l={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("m-header"),this._v(" "),a("keep-alive",[a("router-view")],1)],1)},staticRenderFns:[]};var r=i("VU/8")(n,l,!1,function(t){i("nks0")},null,null).exports,o=i("/ocq"),c=i("GQaK"),h={props:{y:{type:Number,default:0}},data:function(){return{width:50,height:80}},computed:{distance:function(){return Math.max(0,Math.min(this.y*this.ratio,this.maxDistance))},style:function(){return"width:"+this.width/this.ratio+"px;height:"+this.height/this.ratio+"px"}},created:function(){this.ratio=window.devicePixelRatio,this.width*=this.ratio,this.height*=this.ratio,this.initRadius=18*this.ratio,this.minHeadRadius=12*this.ratio,this.minTailRadius=5*this.ratio,this.initArrowRadius=10*this.ratio,this.minArrowRadius=6*this.ratio,this.arrowWidth=3*this.ratio,this.maxDistance=40*this.ratio,this.initCenterX=25*this.ratio,this.initCenterY=25*this.ratio,this.headCenter={x:this.initCenterX,y:this.initCenterY}},mounted:function(){this._draw()},methods:{_draw:function(){var t=this.$refs.bubble,a=t.getContext("2d");a.clearRect(0,0,t.width,t.height),this._drawBubble(a),this._drawArrow(a)},_drawBubble:function(t){t.save(),t.beginPath();var a=this.distance/this.maxDistance,i=this.initRadius-(this.initRadius-this.minHeadRadius)*a;this.headCenter.y=this.initCenterY-(this.initRadius-this.minHeadRadius)*a,t.arc(this.headCenter.x,this.headCenter.y,i,0,Math.PI,!0);var s=this.initRadius-(this.initRadius-this.minTailRadius)*a,e={x:this.headCenter.x,y:this.headCenter.y+this.distance},n={x:e.x-s,y:e.y},l={x:n.x,y:n.y-this.distance/2};t.quadraticCurveTo(l.x,l.y,n.x,n.y),t.arc(e.x,e.y,s,Math.PI,0,!0);var r={x:this.headCenter.x+i,y:this.headCenter.y},o={x:e.x+s,y:r.y+this.distance/2};t.quadraticCurveTo(o.x,o.y,r.x,r.y),t.fillStyle="rgb(170,170,170)",t.fill(),t.strokeStyle="rgb(153,153,153)",t.stroke(),t.restore()},_drawArrow:function(t){t.save(),t.beginPath();var a=this.distance/this.maxDistance,i=this.initArrowRadius-(this.initArrowRadius-this.minArrowRadius)*a;t.arc(this.headCenter.x,this.headCenter.y,i-(this.arrowWidth-a),-Math.PI/2,0,!0),t.arc(this.headCenter.x,this.headCenter.y,i,0,3*Math.PI/2,!1),t.lineTo(this.headCenter.x,this.headCenter.y-i-this.arrowWidth/2+a),t.lineTo(this.headCenter.x+2*this.arrowWidth-2*a,this.headCenter.y-i+this.arrowWidth/2),t.lineTo(this.headCenter.x,this.headCenter.y-i+3*this.arrowWidth/2-a),t.fillStyle="rgb(255,255,255)",t.fill(),t.strokeStyle="rgb(170,170,170)",t.stroke(),t.restore()}},watch:{y:function(){this._draw()}}},u={render:function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"bubble",style:this.style,attrs:{width:this.width,height:this.height}})},staticRenderFns:[]};i("VU/8")(h,u,!1,function(t){i("LkMk")},null,null).exports;var d={name:"loading"},p={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"mf-loading-container"},[a("div",{staticClass:"la-ball-clip-rotate-pulse"},[a("div"),this._v(" "),a("div")])])}]};var f=i("VU/8")(d,p,!1,function(t){i("Z+Dc")},null,null).exports,v=i("//Fk"),_=i.n(v),m=i("mtWM"),g=i.n(m),b="https://cnodejs.org/api/v1";function w(t,a,i){var s=b+"/topics",e={page:t,limit:a,tab:i,mdrender:!1};return g.a.get(s,{params:e}).then(function(t){return _.a.resolve(t.data)})}function y(t,a){var i=new Date(t),s={"M+":i.getMonth()+1,"d+":i.getDate(),"h+":i.getHours(),"m+":i.getMinutes(),"s+":i.getSeconds(),"q+":Math.floor((i.getMonth()+3)/3),S:i.getMilliseconds()};for(var e in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(i.getFullYear()+"").substr(4-RegExp.$1.length))),s)new RegExp("("+e+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?s[e]:("00"+s[e]).substr((""+s[e]).length)));return a}function C(t){for(var a={ask:"问答",share:"分享",job:"招聘",good:"精华"},i=0;i<t.length;i++){t[i].create_at=y(t[i].create_at,"yyyy-MM-dd hh:mm:ss"),t[i].tab&&(t[i].tab=a[t[i].tab]);var s=t[i].content;s.length>120&&(t[i].content=s.slice(0,120)+"...")}return t}var D={data:function(){return{odata:this.data,page:2,limit:20,pullDownStyle:"",bubbleY:0,beforePullDown:!0,isPullingDown:!1,isPullUpFinish:!1}},props:{stab:{type:String,default:""},probeType:{type:Number,defalut:1},scrollbar:{type:null,default:!1},listenScroll:{type:Boolean,default:!1},listenBeforeScroll:{type:Boolean,default:!1},pullDownRefresh:{type:null,default:!0},pullUpLoad:{type:null,default:!0},data:{type:Array,default:null},bounce:{default:!0}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},created:function(){this.pullDownInitTop=-100},methods:{refresh:function(){this.scroll&&this.scroll.refresh(),this.beforePullDown=!0},_getAllList:function(t){var a=this;w(this.page,this.limit,this.stab).then(function(i){i.success&&(1===t?(a.odata=a.data.concat(C(i.data)),a.scroll.finishPullUp(),i.data.length<a.limit&&(a.isPullUpFinish=!0)):(a.odata=C(i.data),setTimeout(function(){a.scroll.finishPullDown(),a.isPullingDown=!1},1e3)),setTimeout(function(){a.$emit("concatData",a.odata),a.page++,a.refresh()},500))})},initScroll:function(){if(this.$refs.wrapper){var t={probeType:this.probeType,scrollbar:this.scrollbar,pullDownRefresh:this.pullDownRefresh,pullUpLoad:this.pullUpLoad,bounce:this.bounce,click:!0};this.scroll=new c.a(this.$refs.wrapper,t),this.pullDownRefresh&&this._initPullDownRefresh(),this.pullUpLoad&&this._initPullUpLoad()}},_initPullUpLoad:function(){var t=this;this.scroll.on("pullingUp",function(){t.isPullUpFinish||t._getAllList(1)})},_initPullDownRefresh:function(){var t=this;this.scroll.on("pullingDown",function(){t.beforePullDown=!1,t.isPullingDown=!0,t.page=1,t._getAllList(2)}),this.scroll.on("scroll",function(a){t.pullDownRefresh&&t.beforePullDown&&(t.pullDownStyle="top:"+Math.min(a.y+t.pullDownInitTop,-55)+"px")})}},components:{Loading:f}},x={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{ref:"wrapper",staticClass:"list-wrapper"},[i("div",{staticClass:"list-ul-div"},[i("ul",{staticClass:"list-ul"},t._l(t.data,function(a,s){return i("li",{key:s,staticClass:"z-depth-1",attrs:{"data-aid":a.id}},[i("router-link",{attrs:{to:{name:"article",params:{id:a.id}}}},[i("div",{staticClass:"title-box"},[i("div",{staticClass:"title-img"},[i("div",{staticClass:"img-wrap",style:{backgroundImage:"url("+a.author.avatar_url+")"}}),t._v(" "),i("p",[t._v(t._s(a.author.loginname))])]),t._v(" "),i("div",{staticClass:"title-content"},[i("h5",[t._v(t._s(a.title))]),t._v(" "),i("span",[t._v(t._s(a.create_at))])])]),t._v(" "),i("div",{staticClass:"article",domProps:{innerHTML:t._s(a.content)}}),t._v(" "),i("div",{staticClass:"card-footer"},[i("span",{staticClass:"count"},[t._v("浏览："+t._s(a.visit_count))]),t._v(" "),i("span",{staticClass:"count"},[t._v("回复："+t._s(a.reply_count))]),t._v(" "),i("div",{staticClass:"label-icon"},[i("span",{directives:[{name:"show",rawName:"v-show",value:a.good,expression:"item.good"}],staticClass:"label top"},[t._v("精华")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:a.top,expression:"item.top"}],staticClass:"label top"},[t._v("置顶")]),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!!a.tab&&"精华"!=a.tab,expression:"(!!item.tab)&&(item.tab!='精华')"}],staticClass:"label"},[t._v(t._s(a.tab))])])])])],1)})),t._v(" "),t.pullDownRefresh?i("div",{ref:"pulldown",staticClass:"pulldown-wrapper",style:t.pullDownStyle},[t.beforePullDown?i("div",{staticClass:"before-trigger"},[i("span",[t._v("下拉刷新")])]):i("div",{staticClass:"after-trigger"},[t.isPullingDown?i("div",{staticClass:"loading"},[i("loading")],1):t._e()])]):t._e(),t._v(" "),i("div",{staticClass:"pullup-wrapper"},[t.isPullUpFinish?i("div",{staticClass:"before-trigger"},[i("span",[t._v("暂无更多")])]):i("div",{staticClass:"after-trigger"},[i("loading")],1)])])])},staticRenderFns:[]};var L=i("VU/8")(D,x,!1,function(t){i("DNjm")},"data-v-2760ca30",null).exports,R={data:function(){return{allList:[],stab:"",limit:20}},created:function(){this._getAllList()},components:{Scroll:L},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit).then(function(t){t.success&&(a.allList=C(t.data))})}}},P={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var k=i("VU/8")(R,P,!1,function(t){i("k2++")},"data-v-2e03478b",null).exports,A={data:function(){return{allList:[],stab:"good",limit:20}},created:function(){this._getAllList()},components:{Scroll:L},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},M={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var T=i("VU/8")(A,M,!1,function(t){i("B20+")},"data-v-57506e38",null).exports,U={data:function(){return{allList:[],stab:"job",limit:20}},created:function(){this._getAllList()},components:{Scroll:L},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},S={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var $=i("VU/8")(U,S,!1,function(t){i("BQjm")},"data-v-19002a62",null).exports,E={data:function(){return{allList:[],stab:"ask",limit:20}},created:function(){this._getAllList()},components:{Scroll:L},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},F={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var N=i("VU/8")(E,F,!1,function(t){i("BhNz")},"data-v-1990202c",null).exports,j={data:function(){return{allList:[],stab:"share",limit:20}},created:function(){this._getAllList()},components:{Scroll:L},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},B={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var V=i("VU/8")(j,B,!1,function(t){i("ZNBN")},"data-v-010976de",null).exports,H={data:function(){return{aData:[]}},created:function(){this.getData()},filters:{format:function(t){if(t)return y(new Date(t),"yyyy-MM-dd hh:mm")},formatTab:function(t){if(t){return{ask:"问答",share:"分享",job:"招聘",good:"精华"}[t=t.toString()]}}},methods:{getData:function(){var t=this;(function(t){var a=b+"/topic/"+t;return g.a.get(a).then(function(t){return _.a.resolve(t.data)})})(this.$route.params.id).then(function(a){a.success&&(t.aData=a.data,console.log(t.aData))})}}},I={render:function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"a-box z-depth-1"},[i("div",{staticClass:"article-box"},[i("h2",[i("span",{directives:[{name:"show",rawName:"v-show",value:t.aData.good||t.aData.top,expression:"aData.good||aData.top"}],staticClass:"label top"},[t._v(t._s(t.aData.top?"置顶":"精华"))]),t._v(t._s(t.aData.title))]),t._v(" "),i("ul",{staticClass:"desc"},[i("li",[t._v("发布于 "+t._s(t._f("format")(t.aData.create_at)))]),t._v(" "),i("li",[t._v("作者 "+t._s(t.aData.author&&t.aData.author.loginname?t.aData.author.loginname:"佚名"))]),t._v(" "),i("li",[t._v(t._s(t.aData.visit_count)+" 次浏览")]),t._v(" "),i("li",[t._v("来自 "+t._s(t._f("formatTab")(t.aData.tab)))])]),t._v(" "),i("div",{staticClass:"a-section",domProps:{innerHTML:t._s(t.aData.content)}})]),t._v(" "),i("div",{staticClass:"comment-box"},[i("div",{staticClass:"c-header"},[t._v(t._s(t.aData.reply_count)+" 回复")]),t._v(" "),i("div",{staticClass:"reply-box"},t._l(t.aData.replies,function(a,s){return i("div",{key:s,staticClass:"reply-item",attrs:{"data-rid":a.id}},[i("div",{staticClass:"reply-title"},[i("span",{staticClass:"r-t r-img",style:{backgroundImage:"url("+a.author.avatar_url+")"}}),t._v(" "),i("span",{staticClass:"r-t r-name"},[t._v(t._s(a.author&&a.author.loginname?a.author.loginname:"佚名"))]),t._v(" "),i("span",{staticClass:"r-t r-time"},[t._v(t._s(s+1)+"楼 - "+t._s(t._f("format")(a.create_at)))])]),t._v(" "),i("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(a.content)}})])}))])])},staticRenderFns:[]};var W=i("VU/8")(H,I,!1,function(t){i("hP+S")},null,null).exports;s.a.use(o.a);var z=new o.a({routes:[{path:"/",redirect:"/all"},{path:"/all",component:k},{path:"/good",component:T},{path:"/ask",component:N},{path:"/share",component:V},{path:"/job",component:$},{path:"/article/:id",name:"article",component:W}]});s.a.config.productionTip=!1,new s.a({el:"#app",router:z,components:{App:r},template:"<App/>"})},"Z+Dc":function(t,a){},ZNBN:function(t,a){},"hP+S":function(t,a){},"k2++":function(t,a){},nks0:function(t,a){},yA5T:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.6747dd861040459823a3.js.map