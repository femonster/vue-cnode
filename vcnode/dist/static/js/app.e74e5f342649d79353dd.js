webpackJsonp([1],{"B20+":function(t,a){},BQjm:function(t,a){},BhNz:function(t,a){},NHnr:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("7+uW"),i={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"m-header z-depth-1"},[s("img",{attrs:{src:"https://cnodejs.org/public/images/cnodejs_light.svg",alt:"logo"}}),t._v(" "),s("ul",{staticClass:"all-list"},[s("li",[s("router-link",{attrs:{to:"/all"}},[t._v("全部")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/good"}},[t._v("精华")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/share"}},[t._v("分享")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/ask"}},[t._v("问答")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/job"}},[t._v("招聘")])],1)])])},staticRenderFns:[]};var n={name:"App",data:function(){return{transName:"",atab:["all","good","share","ask","job"]}},components:{MHeader:s("VU/8")({name:"m-header"},i,!1,function(t){s("yA5T")},null,null).exports},watch:{$route:function(t,a){if("article"===t.name||"article"===a.name)this.transName="fade";else{var s=this.atab.indexOf(t.name),e=this.atab.indexOf(a.name);this.transName=s>e?"slide-left":"slide-right"}}},computed:{key:function(){return"article"===this.$route.name?this.$route.name+ +new Date:this.$route.name}}},l={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("m-header"),this._v(" "),a("keep-alive",[a("transition",{attrs:{name:this.transName}},[a("router-view",{key:this.key})],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(n,l,!1,function(t){s("QWnE")},null,null).exports,r=s("/ocq"),c=s("GQaK"),u={name:"loading"},h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"mf-loading-container"},[a("div",{staticClass:"la-ball-clip-rotate-pulse"},[a("div"),this._v(" "),a("div")])])}]};var p=s("VU/8")(u,h,!1,function(t){s("Z+Dc")},null,null).exports,d={data:function(){return{prev:!1}},mounted:function(){"article"===this.$route.name&&(this.prev=!0)},props:{posy:{type:Number,defalut:0}},methods:{tellFather:function(){this.$emit("toTop")},toPrev:function(){this.$router.go(-1)}}},f={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"toolBar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:this.prev,expression:"prev"}],staticClass:"circle z-depth-1 prev",on:{click:this.toPrev}},[this._v("←")]),this._v(" "),a("div",{staticClass:"circle z-depth-1 toTop",class:{show:this.posy<-100},on:{click:this.tellFather}},[this._v("\n        ↑\n    ")])])},staticRenderFns:[]};var v=s("VU/8")(d,f,!1,function(t){s("o7Tx")},"data-v-f50762a6",null).exports,m=s("//Fk"),_=s.n(m),g=s("mtWM"),b=s.n(g),D="https://cnodejs.org/api/v1";function w(t,a,s){var e=D+"/topics",i={page:t,limit:a,tab:s,mdrender:!1};return b.a.get(e,{params:i}).then(function(t){return _.a.resolve(t.data)})}function y(t,a){var s=new Date(t),e={"M+":s.getMonth()+1,"d+":s.getDate(),"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};for(var i in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return a}function C(t){for(var a={ask:"问答",share:"分享",job:"招聘",good:"精华"},s=0;s<t.length;s++){t[s].create_at=y(t[s].create_at,"yyyy-MM-dd hh:mm:ss"),t[s].tab&&(t[s].tab=a[t[s].tab]);var e=t[s].content;e.length>120&&(t[s].content=e.slice(0,120)+"...")}return t}var L={data:function(){return{odata:this.data,page:2,limit:20,pullDownStyle:"",bubbleY:0,beforePullDown:!0,isPullingDown:!1,isPullUpFinish:!1,posy:0}},props:{stab:{type:String,default:""},probeType:{type:Number,defalut:3},scrollbar:{type:null,default:!1},listenScroll:{type:Boolean,default:!1},listenBeforeScroll:{type:Boolean,default:!1},pullDownRefresh:{type:null,default:!0},pullUpLoad:{type:null,default:!0},data:{type:Array,default:null},bounce:{default:!0}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},created:function(){this.pullDownInitTop=-100},methods:{toTop:function(){this.scroll.scrollTo(0,0,500)},refresh:function(){this.scroll&&this.scroll.refresh(),this.beforePullDown=!0},_getAllList:function(t){var a=this;w(this.page,this.limit,this.stab).then(function(s){s.success&&(1===t?(a.odata=a.data.concat(C(s.data)),a.scroll.finishPullUp(),s.data.length<a.limit&&(a.isPullUpFinish=!0)):(a.odata=C(s.data),setTimeout(function(){a.scroll.finishPullDown(),a.isPullingDown=!1},1e3)),setTimeout(function(){a.$emit("concatData",a.odata),a.page++,a.refresh()},500))})},initScroll:function(){var t=this;if(this.$refs.wrapper){var a={probeType:this.probeType,scrollbar:this.scrollbar,pullDownRefresh:this.pullDownRefresh,pullUpLoad:this.pullUpLoad,bounce:this.bounce,click:!0};this.scroll=new c.a(this.$refs.wrapper,a),this.scroll.on("scroll",function(a){t.posy=a.y}),this.pullDownRefresh&&this._initPullDownRefresh(),this.pullUpLoad&&this._initPullUpLoad()}},_initPullUpLoad:function(){var t=this;this.scroll.on("pullingUp",function(){t.isPullUpFinish||t._getAllList(1)})},_initPullDownRefresh:function(){var t=this;this.scroll.on("pullingDown",function(){t.beforePullDown=!1,t.isPullingDown=!0,t.page=1,t._getAllList(2)}),this.scroll.on("scroll",function(a){t.pullDownRefresh&&t.beforePullDown&&(t.pullDownStyle="top:"+Math.min(a.y+t.pullDownInitTop,-55)+"px")})}},components:{Loading:p,RBtn:v}},x={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{ref:"wrapper",staticClass:"list-wrapper"},[s("div",{staticClass:"list-ul-div"},[s("ul",{staticClass:"list-ul"},t._l(t.data,function(a,e){return s("li",{key:e,staticClass:"z-depth-1",attrs:{"data-aid":a.id}},[s("router-link",{attrs:{to:{name:"article",params:{id:a.id}}}},[s("div",{staticClass:"title-box"},[s("div",{staticClass:"title-img"},[s("div",{staticClass:"img-wrap",style:{backgroundImage:"url("+a.author.avatar_url+")"}}),t._v(" "),s("p",[t._v(t._s(a.author.loginname))])]),t._v(" "),s("div",{staticClass:"title-content"},[s("h5",[t._v(t._s(a.title))]),t._v(" "),s("span",[t._v(t._s(a.create_at))])])]),t._v(" "),s("div",{staticClass:"article",domProps:{innerHTML:t._s(a.content)}}),t._v(" "),s("div",{staticClass:"card-footer"},[s("span",{staticClass:"count"},[t._v("浏览："+t._s(a.visit_count))]),t._v(" "),s("span",{staticClass:"count"},[t._v("回复："+t._s(a.reply_count))]),t._v(" "),s("div",{staticClass:"label-icon"},[s("span",{directives:[{name:"show",rawName:"v-show",value:a.good,expression:"item.good"}],staticClass:"label top"},[t._v("精华")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:a.top,expression:"item.top"}],staticClass:"label top"},[t._v("置顶")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!!a.tab&&"精华"!=a.tab,expression:"(!!item.tab)&&(item.tab!='精华')"}],staticClass:"label"},[t._v(t._s(a.tab))])])])])],1)})),t._v(" "),t.pullDownRefresh?s("div",{ref:"pulldown",staticClass:"pulldown-wrapper",style:t.pullDownStyle},[t.beforePullDown?s("div",{staticClass:"before-trigger"},[s("span",[t._v("下拉刷新")])]):s("div",{staticClass:"after-trigger"},[t.isPullingDown?s("div",{staticClass:"loading"},[s("loading")],1):t._e()])]):t._e(),t._v(" "),s("div",{staticClass:"pullup-wrapper"},[t.isPullUpFinish?s("div",{staticClass:"before-trigger"},[s("span",[t._v("暂无更多")])]):s("div",{staticClass:"after-trigger"},[s("loading")],1)])]),t._v(" "),s("r-btn",{attrs:{posy:t.posy},on:{toTop:t.toTop}})],1)},staticRenderFns:[]};var T=s("VU/8")(L,x,!1,function(t){s("b+KA")},"data-v-132b780b",null).exports,k={data:function(){return{allList:[],stab:"",limit:20}},created:function(){this._getAllList()},components:{Scroll:T},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit).then(function(t){t.success&&(a.allList=C(t.data))})}}},$={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var R=s("VU/8")(k,$,!1,function(t){s("k2++")},"data-v-2e03478b",null).exports,P={data:function(){return{allList:[],stab:"good",limit:20}},created:function(){this._getAllList()},components:{Scroll:T},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},U={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var A=s("VU/8")(P,U,!1,function(t){s("B20+")},"data-v-57506e38",null).exports,E={data:function(){return{allList:[],stab:"job",limit:20}},created:function(){this._getAllList()},components:{Scroll:T},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},F={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var N=s("VU/8")(E,F,!1,function(t){s("BQjm")},"data-v-19002a62",null).exports,S={data:function(){return{allList:[],stab:"ask",limit:20}},created:function(){this._getAllList()},components:{Scroll:T},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},M={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var B=s("VU/8")(S,M,!1,function(t){s("BhNz")},"data-v-1990202c",null).exports,j={data:function(){return{allList:[],stab:"share",limit:20}},created:function(){this._getAllList()},components:{Scroll:T},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;w(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=C(t.data))})}}},V={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var z=s("VU/8")(j,V,!1,function(t){s("ZNBN")},"data-v-010976de",null).exports,H={data:function(){return{aData:[],posy:0}},components:{RBtn:v},mounted:function(){},created:function(){var t=this;this.getData(),this.$nextTick(function(){setTimeout(function(){t.initScroll()},20)})},filters:{format:function(t){if(t)return y(new Date(t),"yyyy-MM-dd hh:mm")},formatTab:function(t){if(t){return{ask:"问答",share:"分享",job:"招聘",good:"精华"}[t=t.toString()]}}},methods:{getData:function(){var t=this;(function(t){var a=D+"/topic/"+t;return b.a.get(a).then(function(t){return _.a.resolve(t.data)})})(this.$route.params.id).then(function(a){a.success&&(t.aData=a.data,console.log(t.aData))})},initScroll:function(){var t=this;if(this.$refs.wrapper){this.scroll=new c.a(this.$refs.wrapper,{probeType:3,scrollbar:{fade:!0},bounce:!0,click:!0,preventDefault:!1}),this.scroll.on("scroll",function(a){t.posy=a.y})}},toTop:function(){this.scroll.scrollTo(0,0,500)}}},I={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{ref:"wrapper",staticClass:"a-box"},[s("div",{staticClass:"for-scroll"},[s("div",{staticClass:"a-content-box z-depth-1"},[s("div",{staticClass:"article-box"},[s("h2",[s("span",{directives:[{name:"show",rawName:"v-show",value:t.aData.good||t.aData.top,expression:"aData.good||aData.top"}],staticClass:"label top"},[t._v(t._s(t.aData.top?"置顶":"精华"))]),t._v(t._s(t.aData.title))]),t._v(" "),s("ul",{staticClass:"desc"},[s("li",[t._v("发布于 "+t._s(t._f("format")(t.aData.create_at)))]),t._v(" "),s("li",[t._v("作者 "+t._s(t.aData.author&&t.aData.author.loginname?t.aData.author.loginname:"佚名"))]),t._v(" "),s("li",[t._v(t._s(t.aData.visit_count)+" 次浏览")]),t._v(" "),s("li",[t._v("来自 "+t._s(t._f("formatTab")(t.aData.tab)))])]),t._v(" "),s("div",{staticClass:"a-section",domProps:{innerHTML:t._s(t.aData.content)}})]),t._v(" "),s("div",{staticClass:"comment-box"},[s("div",{staticClass:"c-header"},[t._v(t._s(t.aData.reply_count)+" 回复")]),t._v(" "),s("div",{staticClass:"reply-box"},t._l(t.aData.replies,function(a,e){return s("div",{key:e,staticClass:"reply-item",attrs:{"data-rid":a.id}},[s("div",{staticClass:"reply-title"},[s("span",{staticClass:"r-t r-img",style:{backgroundImage:"url("+a.author.avatar_url+")"}}),t._v(" "),s("span",{staticClass:"r-t r-name"},[t._v(t._s(a.author&&a.author.loginname?a.author.loginname:"佚名"))]),t._v(" "),s("span",{staticClass:"r-t r-time"},[t._v(t._s(e+1)+"楼 - "+t._s(t._f("format")(a.create_at)))])]),t._v(" "),s("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(a.content)}})])}))])])]),t._v(" "),s("r-btn",{attrs:{posy:t.posy},on:{toTop:t.toTop}})],1)},staticRenderFns:[]};var Q=s("VU/8")(H,I,!1,function(t){s("eoEI")},null,null).exports;e.a.use(r.a);var W=new r.a({routes:[{path:"/",redirect:"/all"},{path:"/all",name:"all",component:R},{path:"/good",name:"good",component:A},{path:"/ask",name:"ask",component:B},{path:"/share",name:"share",component:z},{path:"/job",name:"job",component:N},{path:"/article/:id",name:"article",component:Q}]});e.a.config.productionTip=!1,new e.a({el:"#app",router:W,components:{App:o},template:"<App/>"})},QWnE:function(t,a){},"Z+Dc":function(t,a){},ZNBN:function(t,a){},"b+KA":function(t,a){},eoEI:function(t,a){},"k2++":function(t,a){},o7Tx:function(t,a){},yA5T:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.e74e5f342649d79353dd.js.map