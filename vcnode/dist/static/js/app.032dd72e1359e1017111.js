webpackJsonp([1],{"B20+":function(t,a){},BQjm:function(t,a){},BhNz:function(t,a){},"Mx+X":function(t,a){},NHnr:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("7+uW"),i={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"m-header z-depth-1"},[s("img",{attrs:{src:"https://cnodejs.org/public/images/cnodejs_light.svg",alt:"logo"}}),t._v(" "),s("ul",{staticClass:"all-list"},[s("li",[s("router-link",{attrs:{to:"/all"}},[t._v("全部")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/good"}},[t._v("精华")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/share"}},[t._v("分享")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/ask"}},[t._v("问答")])],1),t._v(" "),s("li",[s("router-link",{attrs:{to:"/job"}},[t._v("招聘")])],1)])])},staticRenderFns:[]};var n={name:"App",components:{MHeader:s("VU/8")({name:"m-header"},i,!1,function(t){s("yA5T")},null,null).exports},computed:{key:function(){return"article"===this.$route.name?this.$route.name+ +new Date:this.$route.name}}},l={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("m-header"),this._v(" "),a("keep-alive",[a("router-view",{key:this.key})],1)],1)},staticRenderFns:[]};var o=s("VU/8")(n,l,!1,function(t){s("Mx+X")},null,null).exports,r=s("/ocq"),c=s("GQaK"),u={name:"loading"},h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"mf-loading-container"},[a("div",{staticClass:"la-ball-clip-rotate-pulse"},[a("div"),this._v(" "),a("div")])])}]};var d=s("VU/8")(u,h,!1,function(t){s("Z+Dc")},null,null).exports,p=s("//Fk"),f=s.n(p),v=s("mtWM"),_=s.n(v),m="https://cnodejs.org/api/v1";function g(t,a,s){var e=m+"/topics",i={page:t,limit:a,tab:s,mdrender:!1};return _.a.get(e,{params:i}).then(function(t){return f.a.resolve(t.data)})}function b(t,a){var s=new Date(t),e={"M+":s.getMonth()+1,"d+":s.getDate(),"h+":s.getHours(),"m+":s.getMinutes(),"s+":s.getSeconds(),"q+":Math.floor((s.getMonth()+3)/3),S:s.getMilliseconds()};for(var i in/(y+)/.test(a)&&(a=a.replace(RegExp.$1,(s.getFullYear()+"").substr(4-RegExp.$1.length))),e)new RegExp("("+i+")").test(a)&&(a=a.replace(RegExp.$1,1==RegExp.$1.length?e[i]:("00"+e[i]).substr((""+e[i]).length)));return a}function D(t){for(var a={ask:"问答",share:"分享",job:"招聘",good:"精华"},s=0;s<t.length;s++){t[s].create_at=b(t[s].create_at,"yyyy-MM-dd hh:mm:ss"),t[s].tab&&(t[s].tab=a[t[s].tab]);var e=t[s].content;e.length>120&&(t[s].content=e.slice(0,120)+"...")}return t}var w={data:function(){return{odata:this.data,page:2,limit:20,pullDownStyle:"",bubbleY:0,beforePullDown:!0,isPullingDown:!1,isPullUpFinish:!1}},props:{stab:{type:String,default:""},probeType:{type:Number,defalut:1},scrollbar:{type:null,default:!1},listenScroll:{type:Boolean,default:!1},listenBeforeScroll:{type:Boolean,default:!1},pullDownRefresh:{type:null,default:!0},pullUpLoad:{type:null,default:!0},data:{type:Array,default:null},bounce:{default:!0}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},created:function(){this.pullDownInitTop=-100},methods:{refresh:function(){this.scroll&&this.scroll.refresh(),this.beforePullDown=!0},_getAllList:function(t){var a=this;g(this.page,this.limit,this.stab).then(function(s){s.success&&(1===t?(a.odata=a.data.concat(D(s.data)),a.scroll.finishPullUp(),s.data.length<a.limit&&(a.isPullUpFinish=!0)):(a.odata=D(s.data),setTimeout(function(){a.scroll.finishPullDown(),a.isPullingDown=!1},1e3)),setTimeout(function(){a.$emit("concatData",a.odata),a.page++,a.refresh()},500))})},initScroll:function(){if(this.$refs.wrapper){var t={probeType:this.probeType,scrollbar:this.scrollbar,pullDownRefresh:this.pullDownRefresh,pullUpLoad:this.pullUpLoad,bounce:this.bounce,click:!0};this.scroll=new c.a(this.$refs.wrapper,t),this.pullDownRefresh&&this._initPullDownRefresh(),this.pullUpLoad&&this._initPullUpLoad()}},_initPullUpLoad:function(){var t=this;this.scroll.on("pullingUp",function(){t.isPullUpFinish||t._getAllList(1)})},_initPullDownRefresh:function(){var t=this;this.scroll.on("pullingDown",function(){t.beforePullDown=!1,t.isPullingDown=!0,t.page=1,t._getAllList(2)}),this.scroll.on("scroll",function(a){t.pullDownRefresh&&t.beforePullDown&&(t.pullDownStyle="top:"+Math.min(a.y+t.pullDownInitTop,-55)+"px")})}},components:{Loading:d}},C={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{ref:"wrapper",staticClass:"list-wrapper"},[s("div",{staticClass:"list-ul-div"},[s("ul",{staticClass:"list-ul"},t._l(t.data,function(a,e){return s("li",{key:e,staticClass:"z-depth-1",attrs:{"data-aid":a.id}},[s("router-link",{attrs:{to:{name:"article",params:{id:a.id}}}},[s("div",{staticClass:"title-box"},[s("div",{staticClass:"title-img"},[s("div",{staticClass:"img-wrap",style:{backgroundImage:"url("+a.author.avatar_url+")"}}),t._v(" "),s("p",[t._v(t._s(a.author.loginname))])]),t._v(" "),s("div",{staticClass:"title-content"},[s("h5",[t._v(t._s(a.title))]),t._v(" "),s("span",[t._v(t._s(a.create_at))])])]),t._v(" "),s("div",{staticClass:"article",domProps:{innerHTML:t._s(a.content)}}),t._v(" "),s("div",{staticClass:"card-footer"},[s("span",{staticClass:"count"},[t._v("浏览："+t._s(a.visit_count))]),t._v(" "),s("span",{staticClass:"count"},[t._v("回复："+t._s(a.reply_count))]),t._v(" "),s("div",{staticClass:"label-icon"},[s("span",{directives:[{name:"show",rawName:"v-show",value:a.good,expression:"item.good"}],staticClass:"label top"},[t._v("精华")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:a.top,expression:"item.top"}],staticClass:"label top"},[t._v("置顶")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!!a.tab&&"精华"!=a.tab,expression:"(!!item.tab)&&(item.tab!='精华')"}],staticClass:"label"},[t._v(t._s(a.tab))])])])])],1)})),t._v(" "),t.pullDownRefresh?s("div",{ref:"pulldown",staticClass:"pulldown-wrapper",style:t.pullDownStyle},[t.beforePullDown?s("div",{staticClass:"before-trigger"},[s("span",[t._v("下拉刷新")])]):s("div",{staticClass:"after-trigger"},[t.isPullingDown?s("div",{staticClass:"loading"},[s("loading")],1):t._e()])]):t._e(),t._v(" "),s("div",{staticClass:"pullup-wrapper"},[t.isPullUpFinish?s("div",{staticClass:"before-trigger"},[s("span",[t._v("暂无更多")])]):s("div",{staticClass:"after-trigger"},[s("loading")],1)])])])},staticRenderFns:[]};var y=s("VU/8")(w,C,!1,function(t){s("YCJC")},"data-v-1f43f93c",null).exports,L={data:function(){return{allList:[],stab:"",limit:20}},created:function(){this._getAllList()},components:{Scroll:y},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;g(1,this.limit).then(function(t){t.success&&(a.allList=D(t.data))})}}},x={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var k=s("VU/8")(L,x,!1,function(t){s("k2++")},"data-v-2e03478b",null).exports,$={data:function(){return{allList:[],stab:"good",limit:20}},created:function(){this._getAllList()},components:{Scroll:y},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;g(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=D(t.data))})}}},P={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var R=s("VU/8")($,P,!1,function(t){s("B20+")},"data-v-57506e38",null).exports,U={data:function(){return{allList:[],stab:"job",limit:20}},created:function(){this._getAllList()},components:{Scroll:y},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;g(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=D(t.data))})}}},A={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var M=s("VU/8")(U,A,!1,function(t){s("BQjm")},"data-v-19002a62",null).exports,S={data:function(){return{allList:[],stab:"ask",limit:20}},created:function(){this._getAllList()},components:{Scroll:y},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;g(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=D(t.data))})}}},T={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var E=s("VU/8")(S,T,!1,function(t){s("BhNz")},"data-v-1990202c",null).exports,F={data:function(){return{allList:[],stab:"share",limit:20}},created:function(){this._getAllList()},components:{Scroll:y},methods:{concatData:function(t){this.allList=t},_getAllList:function(t){var a=this;g(1,this.limit,this.stab).then(function(t){t.success&&(a.allList=D(t.data))})}}},N={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"list-type all-list"},[a("scroll",{ref:"scroll",attrs:{data:this.allList,stab:this.stab},on:{concatData:this.concatData}})],1)},staticRenderFns:[]};var j=s("VU/8")(F,N,!1,function(t){s("ZNBN")},"data-v-010976de",null).exports,V={data:function(){return{aData:[]}},mounted:function(){var t=this;setTimeout(function(){t.initScroll()},20)},created:function(){this.getData()},filters:{format:function(t){if(t)return b(new Date(t),"yyyy-MM-dd hh:mm")},formatTab:function(t){if(t){return{ask:"问答",share:"分享",job:"招聘",good:"精华"}[t=t.toString()]}}},methods:{getData:function(){var t=this;(function(t){var a=m+"/topic/"+t;return _.a.get(a).then(function(t){return f.a.resolve(t.data)})})(this.$route.params.id).then(function(a){a.success&&(t.aData=a.data,console.log(t.aData))})},initScroll:function(){if(this.$refs.wrapper){this.scroll=new c.a(this.$refs.wrapper,{probeType:1,scrollbar:{fade:!0},bounce:!0,click:!0})}}}},B={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{ref:"wrapper",staticClass:"a-box"},[s("div",{staticClass:"for-scroll"},[s("div",{staticClass:"a-content-box z-depth-1"},[s("div",{staticClass:"article-box"},[s("h2",[s("span",{directives:[{name:"show",rawName:"v-show",value:t.aData.good||t.aData.top,expression:"aData.good||aData.top"}],staticClass:"label top"},[t._v(t._s(t.aData.top?"置顶":"精华"))]),t._v(t._s(t.aData.title))]),t._v(" "),s("ul",{staticClass:"desc"},[s("li",[t._v("发布于 "+t._s(t._f("format")(t.aData.create_at)))]),t._v(" "),s("li",[t._v("作者 "+t._s(t.aData.author&&t.aData.author.loginname?t.aData.author.loginname:"佚名"))]),t._v(" "),s("li",[t._v(t._s(t.aData.visit_count)+" 次浏览")]),t._v(" "),s("li",[t._v("来自 "+t._s(t._f("formatTab")(t.aData.tab)))])]),t._v(" "),s("div",{staticClass:"a-section",domProps:{innerHTML:t._s(t.aData.content)}})]),t._v(" "),s("div",{staticClass:"comment-box"},[s("div",{staticClass:"c-header"},[t._v(t._s(t.aData.reply_count)+" 回复")]),t._v(" "),s("div",{staticClass:"reply-box"},t._l(t.aData.replies,function(a,e){return s("div",{key:e,staticClass:"reply-item",attrs:{"data-rid":a.id}},[s("div",{staticClass:"reply-title"},[s("span",{staticClass:"r-t r-img",style:{backgroundImage:"url("+a.author.avatar_url+")"}}),t._v(" "),s("span",{staticClass:"r-t r-name"},[t._v(t._s(a.author&&a.author.loginname?a.author.loginname:"佚名"))]),t._v(" "),s("span",{staticClass:"r-t r-time"},[t._v(t._s(e+1)+"楼 - "+t._s(t._f("format")(a.create_at)))])]),t._v(" "),s("div",{staticClass:"reply-content",domProps:{innerHTML:t._s(a.content)}})])}))])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("footer",{staticClass:"c-footer"},[a("p",[this._v("author zgk")])])}]};var H=s("VU/8")(V,B,!1,function(t){s("mh7V")},null,null).exports;e.a.use(r.a);var z=new r.a({routes:[{path:"/",redirect:"/all"},{path:"/all",name:"all",component:k},{path:"/good",name:"good",component:R},{path:"/ask",name:"ask",component:E},{path:"/share",name:"share",component:j},{path:"/job",name:"job",component:M},{path:"/article/:id",name:"article",component:H}]});e.a.config.productionTip=!1,new e.a({el:"#app",router:z,components:{App:o},template:"<App/>"})},YCJC:function(t,a){},"Z+Dc":function(t,a){},ZNBN:function(t,a){},"k2++":function(t,a){},mh7V:function(t,a){},yA5T:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.032dd72e1359e1017111.js.map